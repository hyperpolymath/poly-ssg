// SPDX-License-Identifier: MPL-2.0-or-later
= tiamat-ssg Design Specification
:toc:

== Summary

[cols="1,3"]
|===
|Name |tiamat-ssg
|Verdict |*INTEGRATION*
|Language |Unspecified (hybrid)
|Paradigm |Ddraig + Casket hybrid
|Integrates With |ddraig-ssg, casket-ssg
|===

== Rationale

=== Current State

README states: "Hybrid static site generator combining Ddraig and Casket"
- Ddraig = Idris 2 (dependent types)
- Casket = Haskell (pure functional)

Both are functional languages with strong type systems.

=== Why INTEGRATION

1. **Not a new engine**: It's explicitly a combination of two existing engines.

2. **Unclear benefit**: What does combining them achieve that either alone doesn't?
   - Ddraig already has dependent types
   - Casket already has type safety
   - Both are pure functional

3. **Maintenance burden**: Three codebases (ddraig, casket, tiamat) instead of improving two.

== Analysis: What Could "Hybrid" Mean?

=== Possibility 1: Interop Layer

Run Idris 2 modules from Haskell:
- Idris 2 compiles to Chez Scheme or JavaScript
- Could call Idris-verified code from Haskell
- Complex FFI, unclear benefit

=== Possibility 2: Shared Infrastructure

Common libraries used by both:
- Shared template format
- Shared frontmatter schema
- Common asset pipeline

This is better handled as `poly-ssg-common` library.

=== Possibility 3: Migration Path

Help users move from Casket to Ddraig:
- Compatibility layer
- Gradual type strengthening

This is a documentation/tooling project, not an engine.

== Recommendation

**Clarify intent or Archive**

If the goal is shared infrastructure between Haskell and Idris SSGs:
- Create `poly-ssg-ml` (ML-family) shared library
- Both ddraig and casket can depend on it
- Archive tiamat as a meta-project

If the goal is something else:
- Define it clearly
- Assess whether it's worth the overhead

== Alternative: Mythological Theme

The name "Tiamat" (Babylonian chaos dragon, mother of monsters) could be repurposed:
- Theme for multi-headed/complex site structures
- Visual design with dragon/chaos motifs
- Navigation for sites with multiple independent sections

This would be a *THEME* for casket-ssg or ddraig-ssg.

== Decision Required

Need clarification on actual intent before committing effort.
